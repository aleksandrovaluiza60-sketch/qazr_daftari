<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Qarz Daftari Pro â€” by You</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <!-- Topbar -->
  <header class="topbar">
    <div class="brand">
      <div class="logo">â‚®</div>
      <div class="brand-text">
        <div class="brand-title">Qarz Daftari Pro</div>
        <div class="brand-sub">Offline â€¢ LocalStorage â€¢ Export/Import â€¢ Stats</div>
      </div>
    </div>

    <div class="top-actions">
      <button id="btnTheme" class="btn btn-ghost" title="Theme">ğŸŒ™</button>
      <button id="btnLock" class="btn btn-ghost" title="Lock">ğŸ”’</button>
      <button id="btnHelp" class="btn btn-ghost" title="Help">â“</button>
    </div>
  </header>

  <!-- Lock screen -->
  <section id="lockScreen" class="lock-screen hidden">
    <div class="lock-card">
      <div class="lock-title">ğŸ” Qarz Daftari Lock</div>
      <div class="lock-sub">PIN kiriting</div>
      <input id="pinInput" class="input" type="password" inputmode="numeric" maxlength="6" placeholder="PIN (4-6 raqam)" />
      <div class="lock-actions">
        <button id="btnUnlock" class="btn btn-primary">Unlock</button>
        <button id="btnSetPin" class="btn btn-soft">PIN oâ€˜rnatish</button>
        <button id="btnRemovePin" class="btn btn-danger">PIN oâ€˜chirish</button>
      </div>
      <div class="lock-hint">
        âš ï¸ PIN esdan chiqsa â€” LocalStorage tozalang (brauzer settings).
      </div>
    </div>
  </section>

  <!-- Main layout -->
  <main class="container">

    <!-- Left panel -->
    <aside class="panel panel-left">
      <div class="panel-header">
        <div class="panel-title">â• Yangi yozuv</div>
        <div class="panel-sub">Qarz berilgan yoki olingan</div>
      </div>

      <form id="debtForm" class="form">
        <label class="label">Turi</label>
        <div class="segmented">
          <input type="radio" name="type" id="typeGiven" value="given" checked>
          <label for="typeGiven">Men berdim</label>

          <input type="radio" name="type" id="typeTaken" value="taken">
          <label for="typeTaken">Men oldim</label>
        </div>

        <label class="label">Ism / Kim</label>
        <input id="person" class="input" type="text" placeholder="Masalan: Shaxlo, Doston..." required />

        <label class="label">Telefon (ixtiyoriy)</label>
        <input id="phone" class="input" type="tel" placeholder="+998 90 123 45 67"/>

        <label class="label">Summa (UZS)</label>
        <input id="amount" class="input" type="number" min="0" step="100" placeholder="Masalan: 250000" required />

        <label class="label">Sana</label>
        <input id="date" class="input" type="date" required />

        <label class="label">Muddat (ixtiyoriy)</label>
        <input id="dueDate" class="input" type="date" />

        <label class="label">Izoh</label>
        <textarea id="note" class="textarea" placeholder="Izoh yozing... (masalan: 2 haftada qaytaradi)"></textarea>

        <div class="form-actions">
          <button class="btn btn-primary" type="submit">âœ… Saqlash</button>
          <button class="btn btn-soft" type="button" id="btnReset">â™»ï¸ Tozalash</button>
        </div>
      </form>

      <div class="mini-card">
        <div class="mini-title">âš¡ Tez amallar</div>
        <div class="mini-actions">
          <button id="btnExport" class="btn btn-ghost">â¬‡ï¸ Export JSON</button>
          <button id="btnImport" class="btn btn-ghost">â¬†ï¸ Import JSON</button>
          <input id="importFile" type="file" accept=".json" hidden />
          <button id="btnCSV" class="btn btn-ghost">ğŸ“„ Export CSV</button>
          <button id="btnPrint" class="btn btn-ghost">ğŸ–¨ Print</button>
        </div>
      </div>

      <div class="mini-card">
        <div class="mini-title">ğŸ§¹ Cleanup</div>
        <div class="mini-actions">
          <button id="btnClearAll" class="btn btn-danger">ğŸ—‘ Hammasini oâ€˜chirish</button>
        </div>
      </div>
    </aside>

    <!-- Center panel -->
    <section class="panel panel-center">
      <div class="panel-header">
        <div>
          <div class="panel-title">ğŸ“š Qarzlar roâ€˜yxati</div>
          <div class="panel-sub">Qidiruv, filter, sort, status</div>
        </div>

        <div class="panel-tools">
          <select id="sortBy" class="select">
            <option value="created_desc">Yangi â†’ eski</option>
            <option value="created_asc">Eski â†’ yangi</option>
            <option value="amount_desc">Summa: katta â†’ kichik</option>
            <option value="amount_asc">Summa: kichik â†’ katta</option>
            <option value="name_asc">Ism: A â†’ Z</option>
            <option value="name_desc">Ism: Z â†’ A</option>
          </select>

          <button id="btnAddDemo" class="btn btn-soft" title="Demo">
            âœ¨ Demo
          </button>
        </div>
      </div>

      <div class="filters">
        <input id="search" class="input" type="text" placeholder="ğŸ” Qidirish: ism, izoh, tel..." />

        <select id="filterType" class="select">
          <option value="all">Hammasi</option>
          <option value="given">Men bergan</option>
          <option value="taken">Men olgan</option>
        </select>

        <select id="filterStatus" class="select">
          <option value="all">Status: hammasi</option>
          <option value="open">Ochiq</option>
          <option value="paid">Toâ€˜langan</option>
          <option value="overdue">Muddati oâ€˜tgan</option>
        </select>

        <button id="btnResetFilters" class="btn btn-ghost">â™»ï¸ Filter reset</button>
      </div>

      <div id="list" class="list"></div>

      <div id="emptyState" class="empty hidden">
        <div class="empty-emoji">ğŸ“­</div>
        <div class="empty-title">Hozircha yozuv yoâ€˜q</div>
        <div class="empty-sub">
          Chap tomondan qoâ€˜shib boshlang âœ…
        </div>
      </div>
    </section>

    <!-- Right panel -->
    <aside class="panel panel-right">
      <div class="panel-header">
        <div>
          <div class="panel-title">ğŸ“Š Statistika</div>
          <div class="panel-sub">Umumiy holat</div>
        </div>
      </div>

      <div class="stats-grid">
        <div class="stat">
          <div class="stat-label">Men bergan</div>
          <div class="stat-value" id="statGiven">0</div>
          <div class="stat-mini" id="statGivenCount">0 ta</div>
        </div>

        <div class="stat">
          <div class="stat-label">Men olgan</div>
          <div class="stat-value" id="statTaken">0</div>
          <div class="stat-mini" id="statTakenCount">0 ta</div>
        </div>

        <div class="stat">
          <div class="stat-label">Ochiq qarz</div>
          <div class="stat-value" id="statOpen">0</div>
          <div class="stat-mini" id="statOpenCount">0 ta</div>
        </div>

        <div class="stat">
          <div class="stat-label">Muddati oâ€˜tgan</div>
          <div class="stat-value" id="statOverdue">0</div>
          <div class="stat-mini" id="statOverdueCount">0 ta</div>
        </div>
      </div>

      <div class="chart-card">
        <div class="chart-title">ğŸ“ˆ Balans</div>
        <div class="chart-sub">Berilgan - Olingan</div>
        <div class="balance" id="balance">0</div>
        <div class="balance-hint">Musbat boâ€˜lsa: sizga qarzlar koâ€˜p</div>
      </div>

      <div class="top-people">
        <div class="mini-title">ğŸ† Eng koâ€˜p qarzli odamlar</div>
        <div id="topPeople" class="top-list"></div>
      </div>

      <div class="footer-note">
        <div class="footer-title">âœ… Tavsiya</div>
        <div class="footer-sub">
          â€œPrintâ€ bosib daftar qilib chiqarib olsangiz ham boâ€˜ladi ğŸ˜„
        </div>
      </div>
    </aside>

  </main>

  <!-- Modals -->
  <div id="modal" class="modal hidden">
    <div class="modal-backdrop" id="modalBackdrop"></div>
    <div class="modal-card">
      <div class="modal-head">
        <!-- <div class="modal-title" id="modalTitle">Modal</div> -->
        <button id="btnLock" class="btn btn-ghost" title="Lock">ğŸ”’</button>
      </div>
      <div class="modal-body" id="modalBody"></div>
      <div class="modal-foot" id="modalFoot"></div>
    </div>
  </div>

  <!-- Toast -->
  <div id="toastWrap" class="toast-wrap"></div>

  <script src="app.js"></script>
</body>
</html>
